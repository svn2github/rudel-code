2009-07-12  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* ChangeLog (whole file): updated

	* obby/rudel-obby-state.el (rudel-enter): return nil

	* obby/rudel-obby-client.el
	(rudel-obby-client-state-joining::rudel-enter): return nil
	(rudel-obby-client-state-join-failed::rudel-enter): return nil
	(rudel-obby-client-state-session-synching::rudel-enter): return
	nil
	(rudel-obby-client-state-session-synching::object-print): new
	method; add number of remaining items to string representation
	(rudel-obby-client-state-subscribing::rudel-enter): nil
	(rudel-obby-client-state-document-synching::rudel-enter): nil
	(rudel-obby-client-state-document-synching::object-print): new
	method; add number of remaining bytes to string representation

2009-07-11  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-util.el (with-parsed-arguments): added debug
	declaration
	(whole file): whitespace fixes
	* rudel-util.el (rudel-assemble-line-fragments): added debug
	declaration
	(rudel-loop-lines): added debug declaration
	(rudel-loop-chunks): fixed documentation string; added debug
	declaration

	* rudel-state-machine.el (rudel-no-start-state): new error symbol
	(rudel-state-machine::initialize-instance): try hard to find a
	suitable start sate; call `rudel-switch' instead of just
	`rudel-enter'
	(rudel-state-machine::rudel-switch): always return the new current
	state; accept successor state from `rudel-enter'
	(rudel-state-machine::object-print): new method; add current state
	of state machine to string representation
	(rudel-state-machine::rudel-state-wait): whitespace fixes

2009-07-07  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby.el (class rudel-obby-backend): better
	documentation string
	(rudel-obby-backend::rudel-ask-connect-info): added documentation
	string
	(rudel-obby-backend::rudel-connect): added documentation string
	(rudel-obby-backend::rudel-ask-host-info): added documentation
	string
	(rudel-obby-backend::rudel-host): added documentation string
	(rudel-obby-backend::rudel-make-document): added documentation
	string
	(rudel-obby-send): cosmetic changes
	(whole file): whitespace fixes

2009-07-05  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* INSTALL (REQUIREMENTS): added Emacs itself and GNUTls

	* rudel-tls.el (rudel-tls-start-tls): added a message
	(rudel-tls-wait-handshake): switch to filter
	`rudel-tls-established' instead of restoring the original filter
	(rudel-tls-established): new function; filters GNUTls messages in
	encrypted connections
	(whole file): whitespace fixes

2009-07-04  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* README (INTRODUCTION): extended a bit
	(JOINING A SESSION): added prompt/input example and an explanation
	of encryption issues in the obby backend
	(KNOWN BUGS): new section; no known bugs yet, though

2009-06-17  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-client.el (require rudel-state-machine): the
	connection now is a state machine
	(require rudel-obby-errors): used when analyzing login failures
	(require rudel-obby-state): useful base classes for states
	(rudel-obby-client-state-new): new class; initial state of new
	connections
	(rudel-obby-client-state-encryption-negotiate): new class;
	first encryption state
	(rudel-obby-client-state-encryption-start): new class; second
	encryption state
	(rudel-obby-client-state-joining): new class
	(rudel-obby-client-state-join-failed): new class; entered after
	failed login attempt
	(rudel-obby-client-state idle): new class; default state of
	established connections
	(rudel-obby-client-state-session-synching): new class;
	synchronizing session state to client
	(rudel-obby-client-state-subscribing): new class; first state of
	document subscription
	(rudel-obby-client-state-document-synching): new class;
	synchronizing document state to client
	(rudel-obby-client-connection-states): new variable; alist of
	name symbols and associated state classes
	(rudel-obby-connection::initialize-instance): register states
	(rudel-obby-connection::rudel-register-state): new method; set
	connection slot of state to its connection
	(rudel-obby-connection::rudel-add-context): cleanup
	(rudel-obby-connection::rudel-message): dispatch message using
	`rudel-accept'
	(rudel-obby-connection::rudel-subscribe-to): initiate subscription
	by switching to state 'subscribing'

	* obby/rudel-obby-state.el (rudel-obby-document-handler): new
	class; mixin class that provides handling of obby 'document'
	messages

	* rudel-state-machine.el
	(rudel-state-machine::initialize-instance): find start state in
	slots and switch into it
	(while-file): whitespace fixes

2009-06-15  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* www/index.html (section download): fixed link to download area
	(whole file): whitespace cleanup

	* obby/rudel-obby-state.el (new file): finite state machine states
	for the rudel backend
	* obby/Project.ede (target rudel/obby): added rudel-obby-state.el
	* obby/Makefile (target obby_LISP): added rudel-obby-state.el

	* rudel-util.el (require rudel-errors): required for dispatch
	errors
	(symbol rudel-dispatch-error): new condition symbol for dispatch
	errors
	(rudel-dispatch): new function; dispatch to method based on method
	name
	(whole file): whitespace fixes

2009-06-14  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel-mode.el (global-rudel-minor-mode): removed; the variable
	is created by `define-minor-mode'
	(minor-mode-alist): managed by `define-minor-mode'

	* rudel-mode.el (require easy-mmode): used to define global rudel
	minor mode
	(rudel-minor-keymap): cosmetic changes
	(global-rudel-minor-mode): use `define-minor-mode' to define the
	mode
	(whole file): whitespace cleanup

	* rudel-telepathy.el (whole file): moved to
	telepathy/rudel-telepathy.el
	* telepathy/rudel-telepathy.el (whole file): moved from
	rudel-telepathy.el

	* obby/rudel-obby-server.el (whole file): whitespace cleanup
	* obby/rudel-obby-client.el (require rudel-obby): removed;
	unnecessary
	(rudel-obby-connection::initialize-instance): use &rest for `slots'
	argument; cosmetic changes
	(rudel-obby-connection::rudel-change-color-): use own `rudel-send'
	method instead of the socket's
	(rudel-obby-connection::rudel-subscribe-to): cosmetic changes
	(rudel-obby-connection::rudel-unsubscribe-from): cosmetic changes
	(rudel-obby-connection::rudel-local-operation): cosmetic changes
	(whole file): whitespace cleanup

2009-06-13  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel-errors.el (new file): error data
	* rudel-state-machine.el (new file): a simple finite state machine
	implementation
	* Project.ede (target rudel): added rudel-errors.el and
	rudel-state-machine.el
	* Makefile (target rudel_LISP): added rudel-errors.el and
	rudel-state-machine.el

2009-06-12  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-server.el (require rudel-obby-errors): now
	required
	(rudel-obby-client::rudel-obby/net6_client_login): check username
	and color before adding the client
	(rudel-obby-server::rudel-check-username-and-color): new method;
	make sure username and color are valid and there are no duplicates
	* obby/rudel-obby-errors.el (new file): error data for the obby
	backend
	* obby/Project.ede (rudel/obby): added rudel-obby-errors.el
	* obby/Makefile (obby_LISP): added rudel-obby-errors.el

	* rudel.el (rudel-user::rudel-color): added accessor `rudel-color'

	* obby/rudel-obby-server.el (require cl): required

	* obby/rudel-obby-server.el
	(rudel-obby-client::rudel-obby/net6_client_login): send suffices
	of synchronized documents

2009-06-11  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-server.el
	(rudel-obby-client::rudel-obby/obby_document_create): send
	document/rename message to client when the document suffix changes

	* obby/rudel-obby-server.el
	(rudel-obby-client::rudel-obby/net6_client_login): use
	`with-parsed-arguments'
	(rudel-obby-client::rudel-obby/obby_user_colour): use
	`with-parsed-arguments'
	(rudel-obby-client::rudel-obby/obby_document_create): use
	`with-parsed-arguments'
	(rudel-obby-client::rudel-obby/obby_document): use
	`with-parsed-arguments'
	(rudel-obby-client::rudel-obby/obby_document/subscribe): use
	`with-parsed-arguments'
	(rudel-obby-client::rudel-obby/obby_document/unsubscribe): use
	`with-parsed-arguments'
	(rudel-obby-client::rudel-obby/obby_document/record): use
	`with-parsed-arguments'
	(rudel-obby-client::rudel-obby/obby_document/record/ins): use
	`with-parsed-arguments'
	(rudel-obby-client::rudel-obby/obby_document/record/del): use
	`with-parsed-arguments'

	* obby/rudel-obby-server.el (header): fixed version

2009-06-10  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-local-operation): fixed wording in
	comment

	* www/images/development.png (whole file): changed size 48x48 ->
	64x64
	* www/images/development.svg (whole file): changed size 48x48 ->
	64x64
	* www/images/download.png (whole file): changed size 48x48 ->
	64x64
	* www/images/download.svg (whole file): changed size 48x48 ->
	64x64
	* www/images/info.png (whole file): changed size 48x48 -> 64x64
	* www/images/info.svg (whole file): changed size 48x48 -> 64x64

	* index.html (section introduction): wording fixes; link to Gobby
	(whole file): removed external link class for sourceforge links
	(section download): added link to INSTALL file in svn code browser
	(section footer): fixed copyright

	* compatibility.html (section footer): fixed copyright

2009-06-09  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* INSTALL (section REQUIREMENTS): removed ERT which is not
	currently used
	(section INSTALL): some wording and file name fixes
	(section COMPILING): precise make command

	* www/index.html (section development): fixed mailing list and
	issue tracker links; removed email address

	* www/compatibility.html (head): fixed charset
	(section semantic): added missing <p> tag

	* www/compatibility.html (new file): compatibility information
	* www/index.html (new file): start page
	* www/style.css (new file): stylesheet
	* www/images/development.png (new file): development icon
	* www/images/development.svg (new file): development icon
	* www/images/download.png (new file): download icon
	* www/images/download.svg (new file): download icon
	* www/images/email-link.png (new file): icon for email links
	* www/images/external-link.png (new file): icon for external links
	* www/images/info.png (new file): info icon
	* www/images/info.svg (new file): info icon
	* www/images/screenshot.png (new file): screenshot for the start
	page

	* obby/rudel-obby-serverl.el
	(rudel-obby-client::rudel-obby/obby_document_create): find unique
	suffix for the new document; send suffix to clients

	* obby/rudel-obby.el (header): fixed license text
	* obby/rudel-obby-util.el (header): fixed license text
	* obby/rudel-obby-server.el (header): fixed license text
	* obby/rudel-obby-client.el (header): fixed license text
	* jupiter/jupiter.el (header): fixed license text
	* jupiter/jupiter-operation.el (header): fixed license text
	* jupiter/jupiter-nop.el (header): fixed license text
	* jupiter/jupiter-insert.el (header): fixed license text
	* jupiter/jupiter-delete.el (header): fixed license text
	* jupiter/jupiter-compound.el (header): fixed license text
	* rudel.el (header): fixed license text
	* rudel-util.el (header): fixed license text
	* rudel-tls.el (header): fixed license text
	* rudel-telepathy.e (header): fixed license text
	* rudel-speedbar.el (header): fixed license text
	* rudel-overlay.el (header): fixed license text
	* rudel-operators.el (header): fixed license text
	* rudel-operations.el (header): fixed license text
	* rudel-mode.el (header): fixed license text
	* rudel-interactive.el (header): fixed license text
	* rudel-compat.el (header): fixed license text

	* obby/rudel-obby-util.el (require cl): now required
	(generic rudel-obby-char->byte): new generic; char positions ->
	byte positions
	(jupiter-insert::rudel-obby-char->byte): new method; char
	positions -> byte positions
	(jupiter-delete::rudel-obby-char->byte): new method; char
	positions -> byte positions
	(jupiter-compound::rudel-obby-char->byte): new method; char
	positions -> byte positions
	(jupiter-nop::rudel-obby-char->byte): new method; char positions
	-> byte positions
	(generic rudel-obby-byte->char): new generic; byte positions ->
	char positions
	(jupiter-insert::rudel-obby-byte->char): new method; byte
	positions -> char positions
	(jupiter-delete::rudel-obby-byte->char): new method; byte
	positions -> char positions
	(jupiter-compound::rudel-obby-byte->char): new method; byte
	positions -> char positions
	(jupiter-nop::rudel-obby-byte->char): new method; byte positions
	-> char positions
	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-local-operation): call
	`rudel-obby-char->byte' before processing
	(rudel-obby-connection::rudel-remote-operation): call
	`rudel-obby-byte->char' before processing
	* rudel.el (rudel-buffer-change-workaround-data): new variable;
	holds change data for later use
	(rudel-document::rudel-attach-to-buffer): add
	`rudel-buffer-change-workaround' to 'before-change-functions'
	(rudel-document::rudel-detach-from-buffer): remove
	`rudel-buffer-change-workaround' from 'before-change-functions'
	(rudel-buffer-change-workaround): new function; stores change data
	for later use

2009-06-07  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-obby/net6_client_join): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/net6_client_part): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_welcome): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_sync_init): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_sync_usertable_user): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_user_colour): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_sync_doclist_document):
	use `with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_document_create): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_document_remove): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_document): use
	`with-parsed-arguments'; cleanup
	(rudel-obby-connection::rudel-obby/obby_document/rename): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_document/subscribe): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_document/unsubscribe): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_document/sync_chunk): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_document/record): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_document/record/ins): use
	`with-parsed-arguments'
	(rudel-obby-connection::rudel-obby/obby_document/record/del): use
	`with-parsed-arguments'

2009-06-06  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-obby/net6_client_part): use `eql',
	not `=' when calling `rudel-find-user' since the client id can be
	nil

	* obby/rudel-obby-util.el (require jupiter): silence byte compiler

	* obby/rudel-obby-util.el (rudel-obby-dispatch): moved inside file
	(with-parsed-arguments): new macro; executed forms with variables
	bound to parsed arguments

2009-06-04  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el (require rudel-interactive): interactive functions use
	`rudel-read-backend' and `rudel-read-document'

	* rudel.el (rudel-buffer-document): mark as permanent local
	variable to prevent deletion in the event of a major-mode change
	(rudel-document::rudel-attach-to-buffer): add (buffer-locally)
	`rudel-handle-major-mode-change' to 'change-major-mode-hook' such
	that it can repair damage caused by major-mode changes
	(rudel-document::rudel-detach-from-buffer): remove
	`rudel-handle-major-mode-change' from 'change-major-mode-hook'
	(rudel-mode-changed-buffers) new variable; temporarily stores
	buffers that underwent major-mode changes
	(rudel-handle-major-mode-change): new function; schedules buffers
	for repair after major-mode changes
	(rudel-after-major-mode-change): new function; repairs buffer
	objects after major-mode changes

2009-06-03  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el (rudel-buffer-has-document-p): use `buffer-local-value'
	(rudel-buffer-document): use `buffer-local-value'
	(rudel-set-buffer-document): added documentation string

2009-06-02  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el (rudel-handle-buffer-change): There are three cases
	now: insert, delete and arbitrary changes; arbitrary changes
	generate a delete and insert operation

	* rudel-mode.el (rudel-minor-keymap): added some comments
	(global-rudel-minor-mode): extended documentation string; cleaned
	up code; added comments

	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-obby/net6_client_part): fixed typo
	in variable name client-id-numeric

2009-05-28  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-util.el (header): Fixed version (1.0 -> 0.1)

	* obby/rudel-obby-client.el (header): Fixed version (1.0 -> 0.1)
	(rudel-obby-connection::rudel-obby/obby_document/record/split):
	introduced temporary variable

2009-??-??  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el (rudel-buffer-document): removed; replaced by
	rudel-buffer-documents hash-table
	(rudel-buffer-documents): new variable; a hash-table, which
	associates documents to buffers
	(rudel-buffer-has-document-p):
	(rudel-buffer-document):
	(rudel-set-buffer-document):

2009-03-16  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-obby/net6_client_part): do not crash
	if the client id cannot be found

	* obby/rudel-obby.el (rudel-obby-backend::rudel-make-document):
	specify value 1 for slot suffix
	(rudel-obby-document::suffix): new slot; contains the suffix
	number of the document
	(rudel-obby-document::rudel-unique-name): new method; return
	unique name based on document name and suffix
	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-obby/obby_sync_doclist_document): do
	not ignore the suffix when creating the document object
	(rudel-obby-connection::rudel-obby/obby_document_create): do not
	ignore the suffix when creating the document object
	(rudel-obby-connection::rudel-obby/obby_document/rename): change
	document name and suffix as requested
	* rudel.el (rudel-document::rudel-unique-name): new method;
	returns a unique name for the document
	(rudel-document::rudel-suggested-buffer-name): new method; returns
	a suggested name for the buffer attached to the document
	(rudel-subscribe): use `rudel-suggested-buffer-name' instead of
	the object name
	* rudel-interactive.el (rudel-read-document): use the unique names
	of the documents instead of the object names

2009-02-27  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el (rudel-document::rudel-attach-to-buffer): add hook to
	detach document from the buffer when the buffer is killed
	(rudel-document::rudel-detach-from-buffer): remove unpublish
	function kill buffer hook

2009-02-23  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el (rudel-document): minor cleanup
	(rudel-document::rudel-attach-to-buffer): stylistic changes
	(rudel-document::rudel-detach-from-buffer): fixed argument order in
	call to `rudel-set-buffer-document'

	* obby/rudel-obby-server.el
	(rudel-obby-server::rudel-remove-client): Make sure there is a
	user object before setting the status to offline

	* obby/rudel-obby-client.el (rudel-obby/net6_encryption_failed):
	only fail if encryption has been requested in the first
	place. otherwise, just carry on

	* rudel.el (rudel-document::rudel-attach-to-buffer): use
	`rudel-set-buffer-document'
	(rudel-document::rudel-detach-from-buffer): use
	`rudel-set-buffer-document'
	(rudel-buffer-has-document-p): new function; test whether a buffer
	has an associated document object
	(rudel-buffer-document): new function; returns associated document
	object of a buffer
	(rudel-set-buffer-document): new functions; sets associated
	document object of a buffer
	(rudel-handle-buffer-change): use `rudel-buffer-has-document-p'
	(rudel-publish-buffer): use `rudel-buffer-has-document-p'
	(rudel-unpublish-buffer): use `rudel-buffer-has-document-p' and
	`rudel-buffer-document'
	* rudel-mode.el (rudel-minor-keymap): use
	`rudel-buffer-has-document-p'

	* obby/rudel-obby-client.el (rudel-obby/obby_document/rename):
	new method; dummy implementation

	* obby/rudel-obby-client.el (rudel-obby/net6_client_join):
	stylistic change

2009-02-21  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-util.el (generic rudel-operation->message): new
	generic function; serializes an operation
	(jupiter-insert::rudel-operation->message): new method
	(jupiter-delete::rudel-operation->message): new method
	(jupiter-compound::rudel-operation->message): new method
	(jupiter-nop::rudel-operation->message): new method
	(rudel-message->operation): new function; deserializes an
	operation from a received message
	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-local-insert): do not construct
	message string; use `rudel-operation->message'
	(rudel-obby-connection::rudel-local-delete): do not construct
	message string; use `rudel-operation->message'
	(rudel-obby-connection::rudel-local-operation): new method;
	handles operation objects that represent local operations
	(rudel-obby-connection::rudel-remote-operation): new method;
	handles operation objects that represent remote operations
	(rudel-obby-connection::rudel-obby/obby_document/record/ins):
	construct operation name correctly; do not call jupiter context to
	transform operation
	(rudel-obby-connection::rudel-obby/obby_document/record/del):
	construct operation name correctly; do not call jupiter context to
	transform operation
	(rudel-obby-connection::rudel-obby/obby_document/record/split):
	new method; handles split operation messages
	(rudel-obby-connection::rudel-obby/obby_document/record/noop): new
	method; handles nop messages

2009-02-12  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby.el (rudel-obby-backend::rudel-ask-connect-info):
	ask whether to encrypt the connection
	(rudel-obby-backend::rudel-connect): create connection object
	capable of StartTLS encryption when encryption was requested
	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-obby/net6_encryption): do not fail
	when the server requests encryption
	(rudel-obby-connection::rudel-obby/net6_encryption_begin): start
	TLS encryption for the connection
	(rudel-obby-connection::rudel-obby/net6_encryption_failed): new
	method; stub
	* rudel-tls.el (new file): StartTLS encryption for Rudel
	* Project.ede ("rudel"): added rudel-tls.el
	* Makefile (rudel_LISP): added rudel-tls.el

2009-02-06  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel-compat.el (header): fixed email address, keywords, legal
	notice and file commentary

2009-02-05  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby.el (rudel-compat): require rudel-compat for
	`read-color'
	* rudel.el (rudel-compat): require rudel-compat for `read-color'
	* rudel-interactive.el (rudel-compat): require rudel-compat for
	`read-color'
	* rudel-compat.el (new file): compatibility code
	* Project.ede (rudel): added rudel-compat.el
	* Makefile (rudel_LISP): regenerated: added rudel-compat.el

2009-02-04  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby.el (require rudel)
	* obby/rudel-obby-util.el (require rudel)
	* obby/rudel-obby-client.el (require rudel-obby): make compilation
	succeed

	* rudel.el (include eieio-speedbar): I need it for now; I should
	get rid of it later

	* INSTALL (REQUIREMENTS): added note that CVS version of cedet is
	required
	(INSTALLING): added subdirectories jupiter and obby in load path
	listing; fixed name of autoload file

2009-02-02  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby.el (rudel-obby-backend::rudel-ask-connect-info)
	(rudel-obby-backend::rudel-host, rudel-obby-replace-in-string)
	* obby/rudel-obby-util.el (rudel-obby-dispatch)
	* obby/rudel-obby-server.el (rudel-obby-client::rudel-obby/obby_document)
	(rudel-obby-server::rudel-broadcast, rudel-obby-server::rudel-make-user)
	* obby/rudel-obby-client.el (rudel-obby-connection::rudel-obby/net6_client_join)
	(rudel-obby-connection::rudel-obby/obby_document)
	* jupiter/jupiter-operation.el (jupiter-operation)
	* rudel.el (rudel-backend, rudel-session, rudel-server-session)
	(rudel-connection, rudel-document)
	(rudel-document::rudel-attach-to-buffer)
	(rudel-document::rudel-detach-from-buffer)
	(rudel-document::rudel-insert, rudel-document::rudel-delete)
	(rudel-change-color)
	* rudel-util.el (rudel-assemble-line-fragments, rudel-loop-lines)
	* rudel-overlay.el (rudel-make-author-overlay)
	* rudel-interactive.el (rudel-read-backend, rudel-read-user-color)
	(rudel-read-user, rudel-read-document): replaced 't by t

	* rudel-operators.el (rudel-overlay-operators::rudel-insert):
	Fixed computation of insertion offset when appending to the end of
	the buffer string

	* rudel.el (rudel-document::rudel-chunks): fixed invalid access to
	last chunk for empty buffer

	* rudel.el (rudel-document::rudel-attach-to-buffer): fixed
	incorrect slot reference

	* obby/rudel-obby-server.el
	(rudel-obby-client::rudel-obby/obby_document/subscribe): minor
	rearrangement of expressions
	(rudel-obby-client::rudel-obby/obby_document/unsubscribe): minor
	rearrangement of expressions

	* obby/rudel-obby-server.el
	(rudel-obby-client::rudel-obby/obby_document/record/ins): added
	documentation string
	(rudel-obby-client::rudel-obby/obby_document/record/del): added
	documentation string
	(rudel-obby-server): cosmetic change

	* jupiter/jupiter.el (jupiter-context::jupiter-remote-operation):
	improved documentation string; cosmetic changes

	* jupiter/jupiter-insert.el (jupiter-insert::jupiter-transform):
	improved some comments

	* rudel.el (rudel-document::rudel-attach-to-buffer): renamed
	some variables; added documentation string
	(rudel-document::rudel-insert): improved documentation string
	(rudel-document::rudel-chunks): do not create chunks when buffer
	string is empty; improved comments
	(rudel-choose-backend): compare number using `=' not `eq'

	* obby/rudel-obby-server.el
	(rudel-obby-client::rudel-obby/obby_document/record/ins): use
	`rudel-remote-operation' instead of `rudel-remote-insert'
	(rudel-obby-client::rudel-obby/obby_document/record/del): use
	`rudel-remote-operation' instead of `rudel-remote-delete'
	* obby/rudel-obby-client.el (include rudel-operations): for
	rudel-insert-op and rudel-delete-op
	(rudel-obby-connection::rudel-obby/obby_document/sync_chunk): use
	`rudel-remote-operation' with rudel-insert-op to insert chunks
	(rudel-obby-connection::rudel-obby/obby_document/record/ins): use
	`rudel-remote-operation' instead of `rudel-remote-insert'
	(rudel-obby-connection::rudel-obby/obby_document/record/del): use
	`rudel-remote-operation' instead of `rudel-remote-delete'
	* jupiter/jupiter-operation.el (include rudel-operations): for
	rudel-operation
	(jupiter-operation): derived from rudel-operation
	(jupiter-operation::jupiter-apply): removed; replaced by generic
	`rudel-apply'
	* jupiter/jupiter-nop.el (jupiter-nop::jupiter-apply): removed;
	replaced by `rudel-apply'
	(jupiter-nop::rudel-apply): new method; implements generic
	`rudel-apply'
	* jupiter/jupiter-insert.el (include rudel-operations): for
	jupiter-insert-op
	(jupiter-insert): derived from jupiter-insert-op
	(jupiter-insert::jupiter-apply): removed; inherited from
	jupiter-insert-op
	(jupiter-insert::slot-missing): removed; inherited from
	jupiter-insert-op
	* jupiter/jupiter-delete.el (include rudel-operations): for
	jupiter-delete-op
	(jupiter-delete): derived from jupiter-delete-op
	(jupiter-delete::jupiter-apply): removed; inherited from
	jupiter-delete-op
	(jupiter-delete::slot-missing): removed; inherited from
	jupiter-delete-op
	* jupiter/jupiter-compound.el (jupiter-compound::jupiter-apply):
	removed; replaced by `rudel-apply'
	(jupiter-compound::rudel-apply): new method; implements generic
	`rudel-apply'
	* rudel.el (include rudel-operations): everything is represented
	in terms of operations
	(include rudel-operators): operations apply changes to objects
	through operators
	(rudel-document::rudel-insert): new method; performs insert
	operation
	(rudel-document::rudel-delete): new method; performs delete
	operation
	(rudel-document::rudel-local-insert): removed; document does not
	deal with aspects other than the actual insert and delete
	(rudel-document::rudel-local-delete): removed; document does not
	deal with aspects other than the actual insert and delete
	(rudel-document::rudel-remote-insert): removed; document does not
	deal with aspects other than the actual insert and delete
	(rudel-document::rudel-remote-delete): removed; document does not
	deal with aspects other than the actual insert and delete
	(rudel-document::rudel-local-operation): new method; apply
	operation using overlay and connection operators
	(rudel-document::rudel-remote-operation): new method; apply
	operation using document and overlay operators
	(rudel-handle-buffer-change): realize buffer changes using
	operations
	* rudel-operators.el (new file): collections of operations on
	Rudel data types
	* rudel-operations.el (new file): operation classes

2009-02-01  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* jupiter/jupiter-insert.el (jupiter-insert::jupiter-transform):
	handle jupiter-nop

	* jupiter/jupiter-delete.el (jupiter-delete::jupiter-transform):
	in inner cond, use matching pattern but empty body for
	no-operation cases; in outer cond, handle jupiter-nop

	* jupiter/jupiter-compound.el (jupiter-compound): now derived from
	jupiter-operation; should have been right from the start

2009-01-31  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el (rudel-default-username): Default name used when
	prompting for user name; required by rudel-interactive

	* rudel-interactive.el (rudel-read-backend): fixed typo

2009-01-30  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* jupiter/jupiter-insert.el (jupiter-insert::jupiter-transform):
	fixed two offset calculations
	* jupiter/jupiter-delete.el (jupiter-delete::jupiter-transform):
	fixed offset calculation

	* rudel.el (rudel-backend::rudel-ask-connect-info): changed from
	method to generic
	(rudel-backend::rudel-connect): changed from method to generic
	(rudel-backend::rudel-ask-host-info): changed from method to
	generic
	(rudel-backend::rudel-host): changed from method to generic
	(rudel-backend::rudel-make-document): changed from method to
	generic
	(rudel-session::rudel-disconnect): changed from method to generic
	(rudel-session::rudel-change-color-): changed from method to
	generic
	(rudel-session::rudel-publish): changed from method to generic
	(rudel-session::rudel-subscribe-to): changed from method to
	generic
	(rudel-session::rudel-unsubscribe-from): changed from method to
	generic
	(rudel-session::rudel-local-insert): changed from method to
	generic
	(rudel-session::rudel-local-delete): changed from method to
	generic
	(rudel-session::rudel-remote-insert): changed from method to
	generic
	(rudel-session::rudel-remote-delete): changed from method to
	generic

2009-01-28  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel-overlay.el (header): fixed version
	(whole file): cosmetic changes
	(rudel-author-overlay-p): added documentation string
	(rudel-author-overlays): added documentation string

	* rudel-mode.el (rudel-minor-keymap): cosmetic changes

	* rudel-mode.el (rudel-minor-keymap): Separated session
	participation and hosting items

	* obby/rudel-obby.el (rudel-obby-long-message-threshold): Added
	documentation string
	(rudel-obby-long-message-chunk-size): Added documentation string
	(rudel-obby-backend::rudel-connect): Do not set process object;
	this is done in the `initialize-instance' method of the base class
	(rudel-obby-format-color): retrieve color components with
	`color-values'

	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-remove-context): improved
	documentation string
	(rudel-obby-connection::rudel-publish): added a comment
	(rudel-obby-connection::rudel-subscribe-to): added some comments;
	cleaned up code
	(rudel-obby-connection::rudel-unsubscribe-from): added a comment
	(rudel-obby-connection::rudel-obby/net6_ping): added documentation
	string
	(rudel-obby-connection::rudel-obby/net6_encryption): added
	documentation string
	(rudel-obby-connection::rudel-obby/net6_login_failed): added
	documentation string
	(rudel-obby-connection::rudel-obby/net6_client_part): use `='
	instead of `eq' to compare client ids; fixed documentation string;
	improved comments
	(rudel-obby-connection::rudel-obby/obby_user_colour): use `='
	instead of `eq' to compare user ids
	(rudel-obby-connection::rudel-obby/obby_document/sync_chunk): use
	`=' instead of `eq' to compare user ids; use accessor
	`user-id-numeric'

	* obby/rudel-obby-util.el (rudel-obby-dispatch): new functions;
	dispatches to class methods based on message name; handles errors
	properly
	* obby/rudel-obby-server.el (rudel-obby-client::rudel-message):
	use `rudel-obby-dispatch' to dispatch message
	(rudel-obby-client::rudel-obby/obby_document): use
	`rudel-obby-dispatch' to dispatch message
	(rudel-obby-client::rudel-obby/obby_document/record): use
	`rudel-obby-dispatch' to dispatch message
	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-message): use `rudel-obby-dispatch'
	to dispatch message; moved to a different location
	(rudel-obby-connection::rudel-obby/obby_document): use
	`rudel-obby-dispatch' to dispatch message
	(rudel-obby-connection::rudel-obby/obby_document/record): use
	`rudel-obby-dispatch' to dispatch message

	* obby/rudel-obby-util.el (generic rudel-message): made the method
	a generic function and updated the documentation string

2009-01-26  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby.el (rudel-obby-document::revision): removed; The
	slot is no longer needed
	* obby/rudel-obby-server.el (require jupiter): uses jupiter
	algorithm
	(rudel-obby-client::rudel-obby/obby_document_create): add a
	jupiter context for the document
	(rudel-obby-client::rudel-obby/obby_document/subscribe): add a
	jupiter context for the document
	(rudel-obby-client::rudel-obby/obby_document/unsubscribe): remove
	the jupiter context associated to the document
	(rudel-obby-client::rudel-obby/obby_document/record/ins):
	transformed the operation before applying it to the buffer; use
	the respective jupiter contexts of the receivers when sending the
	operation
	(rudel-obby-client::rudel-obby/obby_document/record/del):
	transformed the operation before applying it to the buffer; use
	the respective jupiter contexts of the receivers when sending the
	operation
	(rudel-obby-server::contexts): new slot; stores jupiter contexts
	for pairs of clients and documents
	(rudel-obby-server::initialize-instance): new method; store an
	empty hash-table in the `contexts' slot
	(rudel-obby-server::rudel-find-context): find the jupiter context
	for a pair of a client and a document
	(rudel-obby-server::rudel-add-context): add a jupiter context for
	a pair of a client and a document
	(rudel-obby-server::rudel-remove-context): remove the jupiter
	context for a pair of a client and a document
	(rudel-obby-context-key): return a list of client id and document
	id
	* obby/rudel-obby-client.el (require jupiter): uses jupiter
	algorithm
	(rudel-obby-connection::contexts): new slot; stores jupiter
	contexts for documents
	(rudel-obby-connection::initialize-instance): new method; store an
	empty hash-table in the `contexts' slot
	(rudel-obby-connection::rudel-find-context): new method; return
	the jupiter context for a document
	(rudel-obby-connection::rudel-add-context): new method; add a
	jupiter context for a document
	(rudel-obby-connection::rudel-remove-context): new method; remove
	the jupiter context for a document
	(rudel-obby-connection::rudel-publish): add a jupiter context for
	the new document
	(rudel-obby-connection::rudel-subscribe-to): add a jupiter context
	for the new document
	(rudel-obby-connection::rudel-unsubscribe-from): remove the
	jupiter context associated to the document
	(rudel-obby-connection::rudel-local-insert): use revision
	information from the jupiter context instead of the document;
	supply the operation to the jupiter context
	(rudel-obby-connection::rudel-local-delete): use revision
	information from the jupiter context instead of the document;
	supply the operation to the jupiter context
	(rudel-obby-connection::rudel-obby/obby_document/record/ins):
	transform the operation using the jupiter context instead of using
	it unmodified
	(rudel-obby-connection::rudel-obby/obby_document/record/del):
	transform the operation using the jupiter context instead of using
	it unmodified

2009-01-22  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby-client.el (rudel-obby-connection): removed
	redundant slot `socket' (inherited from base class)

2009-01-21  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel-interactive.el (rudel-read-user): added comments
	(rudel-allocate-buffer-clear-existing): added documentation string
	(rudel-allocate-buffer-make-unique): added documentation string

2009-01-19  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el, rudel-util.el, rudel-telepathy.el, rudel-speedbar.el,
	rudel-overlay.el, rudel-mode.el, jupiter/jupiter.el,
	jupiter/jupiter-operation.el, jupiter/jupiter-nop.el,
	jupiter/jupiter-insert.el, jupiter/jupiter-delete.el,
	jupiter/jupiter-compound.el, obby/rudel-obby.el,
	obby/rudel-obby-util.el, obby/rudel-obby-server.el,
	obby/rudel-obby-client.el (header): changed email address
	<jmoringe@techfak.uni-bielefeld.de> ->
	<scymtym@users.sourceforge.net>

	* rudel-interactive.el (header): added keywords to file header
	comment

	* jupiter/jupiter.el (new file): core Jupiter algorithm
	* jupiter/jupiter-operation.el (new file): base class for Jupiter
	operations
	* jupiter/jupiter-insert.el (new file): insert operation for
	Jupiter algorithm
	* jupiter/jupiter-delete.el (new file): delete operation for
	Jupiter algorithm
	* jupiter/jupiter-nop.el (new file): no-operation for Jupiter
	algorithm
	* jupiter/jupiter-compound.el (new file): compound operation for
	Jupiter algorithm

2009-01-11  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby.el (rudel-obby-user::client-id): added rationale
	for type (or null integer)
	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-obby/net6_client_join): added
	documentation string; cosmetic changes
	(rudel-obby-connection::rudel-obby/net6_client_part): use accessor
	`rudel-client-id' when searching for the user object; set
	client-id to nil in the user object; added documentation string
	(rudel-obby-connection::rudel-obby/obby_sync_usertable_user):
	store parsed user-id and color in temporaries
	(rudel-obby-connection::rudel-obby/obby_user_colour):store parsed
	color in a temporary; use accessor `rudel-id' when finding the
	user object

	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-change-color-): new function;
	implements changing the color

	* obby/rudel-obby-util.el
	(rudel-obby-socket-owner::rudel-receive): improved documentation
	string

2009-01-05  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* INSTALL (REQUIREMENTS): proper list of requirements and sources
	from which they can be obtained
	(INSTALLING): initial version of installation instructions
	(COMPLETING): some notes about compiling
	* README (INTRODUCTION): short introduction
	(GETTING STARTED): some notes about enabling Rudel, joining and
	hosting sessions

2009-01-04  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby.el (rudel-obby-long-message-threshold): new
	variable; threshold for message size, above which messages are
	sent in multiple chunks
	(rudel-obby-long-message-chunk-size): Chunk size used, when
	chunking long messages.
	(rudel-obby-user::client-id): allow value nil; added accessor;
	added documentation string
	(rudel-obby-send): new function; handles low-level aspects of
	sending obby protocol messages
	* obby/rudel-obby-util.el: new file; contains helper
	functionality, mainly the class `rudel-obby-socket-owner', which
	handles sending and receiving message
	* obby/rudel-obby-server.el (includes): replaced rudel-obby with
	rudel-obby-util, since it contains `rudel-obby-socket-owner'
	(class rudel-obby-client): added base class
	`rudel-obby-socket-owner'
	(rudel-obby-client::rudel-receive): deleted, the functionality is
	provided by the base class `rudel-obby-socket-owner'
	(rudel-obby-client::rudel-send): deleted, the functionality is
	provided by the base class `rudel-obby-socket-owner'
	(rudel-obby-client::rudel-message): new method; called by base
	class when a message is received; dispatches to appropriate
	handler method
	(rudel-obby-client::rudel-obby/obby_user_colour): minor change in
	documentation string
	* obby/rudel-obby-client.el (includes): replaced rudel-obby with
	rudel-obby-util, since it contains `rudel-obby-socket-owner'
	(class rudel-obby-connection): added base class
	`rudel-obby-socket-owner'
	(rudel-obby-connection::rudel-disconnect): just call next method;
	it does what this method formerly did
	(rudel-obby-connection::rudel-close): new method; end the session,
	when the connection is closed
	(rudel-obby-connection::rudel-receive): deleted, the functionality
	is provided by the base class `rudel-obby-socket-owner'
	(rudel-obby-connection::rudel-send): deleted, the functionality is
	provided by the base class `rudel-obby-socket-owner'
	(rudel-obby-connection::rudel-message): new method; called by
	base class when a message is received; dispatches to appropriate
	handler method

	* rudel.el (rudel-document::rudel-detach-from-buffer): do nothing,
	if the document is not attached to any buffer

	* obby/rudel-obby.el (rudel-obby-user): added missing accessor
	`rudel-connected'

	* obby/rudel-obby-server.el
	(rudel-obby-client::rudel-obby/net6_client_login): transmit number
	of synchronization items; transmit list of disconnected users

	* obby/rudel-obby-server.el
	(rudel-obby-client::rudel-obby/obby_document/record/ins):
	broadcast only to clients, which are subscribed to the document;
	send user id of author instead of client id
	(rudel-obby-client::rudel-obby/obby_document/record/del):
	broadcast only to clients, which are subscribed to the document;
	send user id of author instead of client id
	(rudel-obby-client::rudel-subscribed-clients-not-self): new
	method; return a list of clients subscribed to a document
	excluding the client itself.

	* obby/rudel-obby-server.el (rudel-obby-server::next-client-id):
	first id should be 1, not 0; fixed initform accordingly
	(rudel-obby-server::next-user-id):
	first id should be 1, not 0; fixed initform accordingly

	* rudel.el (rudel-document::rudel-chunks): fixed void variable
	`chunks-' -> `augmented-chunks'

	* obby/rudel-obby-server.el
	(rudel-obby-client::rudel-obby/obby_document/subscribe): send
	individual buffer chunks with their respective authors instead of
	one large string without author information
	* rudel.el (rudel-document::rudel-chunks): new method; return a
	list of buffer position ranges and the respective authors, that
	wrote the text

2009-01-03  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby/rudel-obby.el (rudel-obby-backend::rudel-host): cleanup
	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-local-insert): accept arguments
	`position' and `data' instead of `from', `to' and `what'; since
	position is zero-based, transmit it literally
	(rudel-obby-connection::rudel-local-delete): instead of `from' and
	`to' accept argument `position'; since position is
	zero-based. transmit it literally
	(rudel-obby-connection::rudel-obby/obby_document/record):
	identified remaining arguments; dispatch actions to appropriate
	methods; identify methods by interning their symbols
	(rudel-obby-connection::rudel-obby/obby_document/record/ins): new
	method; handle remote insert actions
	(rudel-obby-connection::rudel-obby/obby_document/record/del): new
	method; handle remote delete actions
	* rudel.el (includes): include rudel-overlay
	(rudel-document::rudel-detach-from-buffer): improved readability
	(rudel-document::rudel-local-insert): instead of redundant
	arguments `from', `to' and `what' accept only `position' and
	`data'; update overlays
	(rudel-document::rudel-local-delete): instead of redundant
	arguments `from', `to' and `length' accept only `position' and
	`length'; update overlays
	(rudel-document::rudel-remote-insert): renamed arguments `from' ->
	`position', `what' -> `data'; update overlays
	(rudel-document::rudel-remote-delete): replaced arguments `from'
	and `to' by `position'; update overlays
	(rudel-handle-buffer-change): call rudel-local-{insert, delete}
	with changed arguments

2009-01-01  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el (rudel-session::rudel-unsubscribed-documents): new
	method; returns documents, to which the user associated with the
	session is not yet subscribed
	(rudel-subscribe): when called interactively, use
	`rudel-unsubscribed-documents' to offer only unsubscribed
	documents in completing read

	* rudel-interactive.el (rudel-read-user-name): new function; read
	a user name; could be used to enforce certain constraints on the
	name
	(rudel-read-user-color): new function; read a user color; could be
	used to enforce certain constraints on the color

	* obby/rudel-obby.el (rudel-obby-backend::rudel-ask-host-info):
	new method; ask user for port number
	(rudel-obby-backend::rudel-host): new method; require obby server
	component, make the network process and construct the server
	* obby/rudel-obby-server.el (new file): initial revision of obby
	server for rudel
	* obby/rudel-obby-client.el (header section): added keyword and
	x-rcs
	(rudel-obby-connection::rudel-publish): new method; send document
	to server
	(rudel-obby-connection::rudel-unsubscribe-from): send unsubscribe
	notification to server
	(rudel-obby-connection::rudel-local-insert): cleanup
	(rudel-obby-connection::rudel-local-delete): new method; send
	delete record to server and increase local revision
	(rudel-obby-connection::rudel-obby/obby_document/sync_chunk):
	improved user locating code; do not complain, when the user is not
	found
	(rudel-obby-connection::rudel-obby/obby_document/record): removed
	useless debug message
	* rudel.el (class rudel-session): update documentation string
	(class rudel-server-session): new class; base class for server
	sessions
	(rudel-choose-backend): fixed void-variable when called
	interactively
	(rudel-host-session): provided initial implementation, which uses
	the selected backend to create a server
	(rudel-subscribe): call `set-window-buffer' instead of
	`show-buffer'

	* obby/rudel-obby.el (header section): fixed history
	(rudel-obby-version): new constant; holds version of the obby
	backend
	(rudel-obby-protocol-version): new constant; holds the obby
	protocol version understood by the backend
	(rudel-obby-document::rudel-both-ids): new method; useful when
	locating documents by means of owner and document id

	* rudel-mode.el (header section): added keywords

	* rudel-interactive.el (header section): added file comment

2008-12-30  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el (class rudel-session): converted to base class for
	other session classes; removed slots `connection' and `self' which
	are specific for client sessions
	(rudel-session::rudel-end): empty now; derived classes do the work
	(rudel-session::rudel-add-user): use `object-add-to-list'
	(rudel-session::rudel-remove-user): use `object-remove-from-list'
	(rudel-session::rudel-add-document): use `object-add-to-list'
	(rudel-session::rudel-remove-document): use
	`object-remove-from-list'
	(class rudel-client-session): derived from `rudel-session';
	additional slots `connection' and `self'
	(rudel-client-session::rudel-end): detach buffers from documents
	and call `rudel-disconnect' on connection
	(class rudel-connection): documentation string
	(rudel-connection::rudel-disconnect): remove hook
	`after-change-functions' only locally
	(rudel-join-session): construct a proper session name; store
	backend object in the session; some comments

	* obby/rudel-obby.el (rudel-obby-document): cleanup; improved
	documentation strings

	* rudel-overlay.el (new file): functions for managing overlays,
	which indicate the authors of contributions in collaborative
	buffers

	* rudel.el (rudel-allocate-buffer-function): customization option
	for buffer allocation function
	(rudel-subscribe): call buffer allocation function instead of just
	using the provided name
	* rudel-interactive.el (rudel-allocate-buffer-clear-existing): new
	function; in case of a conflict, allocate buffer for subscription
	by clearing the existing buffer
	(rudel-allocate-buffer-make-unique): new function; in case of a
	conflict, allocate buffer for subscription by producing a unique
	name

	* rudel.el (customization): added customization group definition
	for `rudel'

	* obby/rudel-obby.el (includes): require `rudel-util' instead of
	`rudel'
	(rudel-connect): attach connection to socket object
	(rudel-obby-document): removed slot `subscribed' as it is now
	contained in the base class `rudel-document'
	(rudel-obby-escape-string): call `rudel-obby-replace-in-string'
	instead of `obby-replace-in-string'
	(rudel-obby-unescape-string): call `rudel-obby-replace-in-string'
	instead of `obby-replace-in-string'
	* obby/rudel-obby-client.el
	(rudel-obby-connection::rudel-state-change): required by
	`rudel-sentinel-dispatch'
	(rudel-obby-connection::rudel-subscribe-to): do not touch slot
	`subscribed'
	(rudel-obby-connection::rudel-obby/obby_sync_doclist_document):
	retrieve subscribed users and add to `subscribed' slot
	(rudel-obby-connection::rudel-obby/obby_document_create): add
	document owner to `subscribed' slot
	(rudel-obby-connection::rudel-obby/obby_document/subscribe): add
	user to `subscribed' slot
	(rudel-obby-connection::rudel-obby/obby_document/unsubscribe):
	remove user from `subscribed' slot
	* rudel.el (rudel-document): added slot `subscribed' which
	contains a list of subscribed users
	(rudel-subscribe): do not use `rudel-unsubscribed-documents';
	instead list all documents for now
	(rudel-publish-buffer): add self to `subscribed' slot

	* rudel-util.el (rudel-state-change): cleanup; added comments

	* rudel-mode.el (rudel-minor-keymap): Fixed invalid menu
	definition

	* obby/rudel-obby.el (whole file): moved class
	`rudel-obby-connection' and related methods into file
	`rudel-obby-client.el'
	(rudel-obby-backend): added capability `track-subscriptions'
	(rudel-obby-backend::rudel-connect): require `rudel-obby-client'
	before constructing the connection object
	* obby/rudel-obby-client.el (new file): moved class
	`rudel-obby-connection' and related methods into this file

2008-12-29  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* rudel.el (rudel-connection::rudel-change-color-): new method
	handles color changes
	(rudel-change-color): added basic implementation, which checks the
	backend, asks the user for a new color and calls the connection
	object

	* rudel-util.el (rudel-socket-owner::rudel-state-change): called
	when the state of the connection changes
	(rudel-socket-owner::rudel-close): called when the connection is
	closed
	(rudel-sentinel-dispatch): the argument is a message, not the
	actual state, the state is retrieved with `process-state'

	* rudel-speedbar.el (whole file): cleanup; improved comments

	* rudel-mode.el (whole file): improved comments
	(rudel-read-{backend, document}): moved to rudel-interactive.el
	(rudel-minor-keymap): added key binding for `rudel-change-color';
	added `options' menu item

	* rudel-interactive.el (whole file): user interaction functions
	used by all Rudel components

	* rudel-util.el (whole file): utility functions used by all Rudel
	components

	* rudel.el (whole file): improved comments
	(rudel-backend::make-document): new function create an appropriate
	document object for the backend
	(rudel-session::rudel-end): added documentation string
	(rudel-session::rudel-add-user): added documentation string
	(rudel-session::rudel-remove-user): added documentation string
	(rudel-session::rudel-remove-document): new method; remove
	document from session
	(rudel-connection::rudel-publish): new function; called when a
	buffer is published
	(rudel-connection::rudel-unsubscribe-from): new function; called
	when a subscription is canceled
	(class rudel-user): added documentation strings
	(class rudel-document): added documentation strings
	(rudel-document::rudel-attach-to-buffer): add to
	`after-change-functions' hook only for the buffer in question;
	added some comments
	(rudel-document::rudel-detach-from-buffer): cleanup
	(rudel-document::rudel-remote-insert): added comments
	(rudel-document::rudel-remote-delete): added comments
	(rudel-handle-buffer-change): added comments
	(rudel-choose-backend): added comments
	(rudel-end-session): additional error check
	(rudel-subscribe): call `rudel-unsubscribed-documents' when
	completing document name; added comments
	(rudel-unpublish-buffer): call `rudel-detach-from-buffer' and
	`rudel-unsubscribe-from'; added comments

	* obby/rudel-obby.el (whole file): improved comments
	(rudel-obby-backend::rudel-ask-connect-info): removed :override
	tag; added comments
	(rudel-obby-backend::rudel-connect): removed :override tag; use
	`make-network-process' instead of `open-network-stream' and attach
	filter and sentinel right away; removed some debug code
	(rudel-obby-backend::rudel-disconnect): removed :override tag
	(rudel-obby-backend::rudel-subscribe-to): removed :override tag
	(rudel-obby-backend::rudel-local-insert): removed :override tag
	(rudel-obby-backend::rudel-local-delete): removed :override tag
	(rudel-obby-backend::rudel-make-document): new method; creates a
	new rudel-obby-document object
	(rudel-obby-backend::rudel-available-document-id): obtains an
	unused document id, which can be assigned to a new document
	(class rudel-obby-connection): removed useless `host' and `port'
	slots
	(rudel-obby-connection::rudel-receive): removed some debug code
	(rudel-obby-connection::rudel-send): removed some debug code
	(rudel-obby-connection::rudel-obby/net6_client_join): fixed syntax
	error
	(class rudel-obby-user): added accessors for slots `client-id' and
	`user-id'
	(rudel-obby-user::eieio-speedbar-description): removed :override
	tag
	(rudel-obby-user::eieio-speedbar-object-buttonname): removed
	:override tag
	(class rudel-obby-document): added accessors and documentation for
	slot `id'
	(rudel-obby-document::eieio-speedbar-object-buttonname): removed
	:override tag
	(rudel-obby-replace-in-string): new function; replace a set of
	patterns in a string
	(rudel-obby-escape-string): new function; replace obby control
	characters with their escape sequences
	(rudel-obby-unescape-string): new function; invers of
	`rudel-obby-escape-string'
	(rudel-obby-parse-color): added documentation
	(rudel-obby-format-color): added documentation
	(rudel-obby-assemble-message): properly escape message components
	(rudel-obby-parse-message): properly unescape message components

	* README (whole file): some initial notes
	* INSTALL (whole file): some initial notes

2008-12-02  Jan Moringen  <jmoringe@techfak.uni-bielefeld.de>

	* obby (directory): new directory for files belonging to the obby
	backend
	* rudel-obby.el (whole file): moved to `obby' directory
	* obby/rudel-obby.el (whole file): moved here from parent
	directory

	* Changelog (whole file): renamed to `ChangeLog?'
	* ChangeLog? (whole file): fixed name

	* INSTALL (whole file): added

	* rudel.el (whole file): fixed some comments, removed some test
	code
	(rudel-version): new variable; global Rudel version
	(rudel-sessions): removed; we only allow one session for now
	(rudel-session): cleaned up
	(rudel-session::rudel-end): cleaned up; added some comments
	(rudel-session::rudel-add-user): cosmetic changes
	(rudel-session::rudel-remove-user): cosmetic changes
	(rudel-session::rudel-find-user): cosmetic changes
	(rudel-session::rudel-add-document): cosmetic changes
	(rudel-session::rudel-find-document): cosmetic changes
	(rudel-backend::rudel-connect): improved documentation string
	(rudel-backend::rudel-ask-host-info): renamed from
	`rudel-ask-listen-info'
	(rudel-backend::rudel-host): renamed from `rudel-listen'
	(rudel-document::rudel-attach-to-buffer): cosmetic changes
	(rudel-document::rudel-remote-insert): cleaned up
	(rudel-document::rudel-remote-delete): cleaned up
	(rudel-load-backends): cosmetic changes
	(rudel-choose-backend): fixed message display
	(rudel-host-session): improved documentation string
	(rudel-change-color): raise an error since this is not yet
	implemented
	(rudel-subscribe): added comments
	(rudel-unpublish-buffer): raise an error if the buffer has not
	been published

	* rudel.el (whole file): cleanup up some obsolete code
